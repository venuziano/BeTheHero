{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"/home/rrs/Documents/vscode/BeTheHero/mobile/src/pages/IncidentCreate/index.js\";\nimport React, { useState, useEffect } from 'react';\nimport { Feather } from '@expo/vector-icons';\nimport { useNavigation } from '@react-navigation/native';\nimport View from \"react-native-web/dist/exports/View\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport TouchableWithoutFeedback from \"react-native-web/dist/exports/TouchableWithoutFeedback\";\nimport Keyboard from \"react-native-web/dist/exports/Keyboard\";\nimport KeyboardAvoidingView from \"react-native-web/dist/exports/KeyboardAvoidingView\";\nimport Platform from \"react-native-web/dist/exports/Platform\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport AsyncStorage from \"react-native-web/dist/exports/AsyncStorage\";\nimport api from \"../../services/api\";\nimport logoImg from \"../../assets/logo.png\";\nimport styles from \"./styles\";\nexport default function IncidentCreate() {\n  var _useState = useState(''),\n      _useState2 = _slicedToArray(_useState, 2),\n      title = _useState2[0],\n      setTitle = _useState2[1];\n\n  var _useState3 = useState(''),\n      _useState4 = _slicedToArray(_useState3, 2),\n      description = _useState4[0],\n      setDescription = _useState4[1];\n\n  var _useState5 = useState(''),\n      _useState6 = _slicedToArray(_useState5, 2),\n      value = _useState6[0],\n      setValue = _useState6[1];\n\n  var _useState7 = useState(''),\n      _useState8 = _slicedToArray(_useState7, 2),\n      ongID = _useState8[0],\n      setOngID = _useState8[1];\n\n  var navigation = useNavigation();\n\n  function navigateBack() {\n    navigation.goBack();\n  }\n\n  function loadStorage() {\n    var ongid;\n    return _regeneratorRuntime.async(function loadStorage$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.prev = 0;\n            _context.next = 3;\n            return _regeneratorRuntime.awrap(AsyncStorage.getItem('ongID'));\n\n          case 3:\n            ongid = _context.sent;\n\n            if (ongid !== null) {\n              setOngID(ongid);\n            }\n\n            _context.next = 10;\n            break;\n\n          case 7:\n            _context.prev = 7;\n            _context.t0 = _context[\"catch\"](0);\n            alert(_context.t0);\n\n          case 10:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, [[0, 7]], Promise);\n  }\n\n  function handleRegisterIncident(values) {\n    var data;\n    return _regeneratorRuntime.async(function handleRegisterIncident$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            data = {\n              title: title,\n              description: description,\n              value: value\n            };\n            _context2.prev = 1;\n            _context2.next = 4;\n            return _regeneratorRuntime.awrap(api.post('incidents', data, {\n              headers: {\n                Authorization: ongID\n              }\n            }));\n\n          case 4:\n            Alert.alert('Sucesso', 'Caso cadastrado com sucesso!');\n            navigation.navigate('Incidents');\n            _context2.next = 11;\n            break;\n\n          case 8:\n            _context2.prev = 8;\n            _context2.t0 = _context2[\"catch\"](1);\n            alert('Falha', 'Erro no cadastro, tente novamente.');\n\n          case 11:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, [[1, 8]], Promise);\n  }\n\n  useEffect(function () {\n    loadStorage();\n  }, []);\n  return React.createElement(KeyboardAvoidingView, {\n    behavior: Platform.OS == \"android\" ? \"padding\" : \"height\",\n    behavior: Platform.OS == \"ios\" ? \"padding\" : \"height\",\n    style: styles.keyboard,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 5\n    }\n  }, React.createElement(TouchableWithoutFeedback, {\n    onPress: Keyboard.dismiss,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 7\n    }\n  }, React.createElement(View, {\n    style: styles.container,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 9\n    }\n  }, React.createElement(View, {\n    style: styles.header,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 11\n    }\n  }, React.createElement(Image, {\n    source: logoImg,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 13\n    }\n  }), React.createElement(TouchableOpacity, {\n    onPress: navigateBack,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 13\n    }\n  }, React.createElement(Feather, {\n    name: \"arrow-left\",\n    size: 28,\n    color: \"#e82041\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 15\n    }\n  }))), React.createElement(Text, {\n    style: styles.title,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 11\n    }\n  }, \"Cadastre um caso\"), React.createElement(Text, {\n    style: styles.description,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 11\n    }\n  }, \"Descreva o caso detalhadamente para encontrar um her\\xF3i para resolver isso.\"), React.createElement(ScrollView, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 11\n    }\n  }, React.createElement(View, {\n    style: styles.incident,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 13\n    }\n  }, React.createElement(TextInput, {\n    style: styles.textInput,\n    placeholder: \"T\\xEDtulo do caso\",\n    value: title,\n    onChangeText: function onChangeText(text) {\n      return setTitle(text);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 15\n    }\n  }), React.createElement(TextInput, {\n    style: styles.textInput,\n    placeholder: \"Descri\\xE7\\xE3o\",\n    value: description,\n    onChangeText: function onChangeText(text) {\n      return setDescription(text);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 15\n    }\n  }), React.createElement(TextInput, {\n    style: styles.textInput,\n    placeholder: \"Valor em R$\",\n    value: value,\n    onChangeText: function onChangeText(text) {\n      return setValue(text);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 15\n    }\n  }))), React.createElement(View, {\n    style: styles.action,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 11\n    }\n  }, React.createElement(TouchableOpacity, {\n    style: styles.registerAction,\n    onPress: handleRegisterIncident,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 13\n    }\n  }, React.createElement(Text, {\n    style: styles.actionText,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 15\n    }\n  }, \"Cadastrar\"))))));\n}","map":{"version":3,"sources":["/home/rrs/Documents/vscode/BeTheHero/mobile/src/pages/IncidentCreate/index.js"],"names":["React","useState","useEffect","Feather","useNavigation","api","logoImg","styles","IncidentCreate","title","setTitle","description","setDescription","value","setValue","ongID","setOngID","navigation","navigateBack","goBack","loadStorage","AsyncStorage","getItem","ongid","alert","handleRegisterIncident","values","data","post","headers","Authorization","Alert","navigate","Platform","OS","keyboard","Keyboard","dismiss","container","header","incident","textInput","text","action","registerAction","actionText"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Feather } from '@expo/vector-icons';\nimport { useNavigation } from '@react-navigation/native';\nimport { View, Image, Text, TouchableOpacity, TextInput, TouchableWithoutFeedback, Keyboard,\n  KeyboardAvoidingView, Platform, ScrollView, Alert, AsyncStorage\n} from 'react-native'\n\nimport api from '../../services/api'\n\nimport logoImg from '../../assets/logo.png';\n\nimport styles from './styles';\n\nexport default function IncidentCreate() {\n  const [title, setTitle] = useState('');\n  const [description, setDescription] = useState('');\n  const [value, setValue] = useState('');\n  const [ongID, setOngID] = useState('');\n  \n  const navigation = useNavigation();\n\n  function navigateBack() {\n    navigation.goBack();\n  }\n\n  async function loadStorage() {\n    \n    try {\n      const ongid = await AsyncStorage.getItem('ongID');\n\n      if (ongid !== null) {\n        setOngID(ongid);\n      }\n\n    } catch (e) {\n      alert(e);\n    } \n  }\n\n  async function handleRegisterIncident(values) {\n    \n    const data = {\n      title,\n      description,\n      value,\n    }\n\n    try {\n      await api.post('incidents', data, {\n        headers: {\n          Authorization: ongID, \n        }\n      })\n\n      Alert.alert('Sucesso', 'Caso cadastrado com sucesso!');\n      navigation.navigate('Incidents');\n    } catch (err) {\n      alert('Falha', 'Erro no cadastro, tente novamente.');\n    }\n  }\n\n  useEffect(() => { loadStorage() }, []);\n\n  return (\n    <KeyboardAvoidingView\n      behavior={Platform.OS == \"android\" ? \"padding\" : \"height\"}\n      behavior={Platform.OS == \"ios\" ? \"padding\" : \"height\"}\n      style={styles.keyboard}\n    >\n\n      <TouchableWithoutFeedback onPress={Keyboard.dismiss}>\n        <View style={styles.container}>\n          <View style={styles.header}>\n            <Image source={logoImg} />\n\n            <TouchableOpacity onPress={navigateBack}>\n              <Feather name=\"arrow-left\" size={28} color=\"#e82041\" />\n            </TouchableOpacity>\n          </View>\n\n          <Text style={styles.title}>Cadastre um caso</Text>\n          <Text style={styles.description}>Descreva o caso detalhadamente para encontrar um herói para resolver isso.</Text>\n          \n          <ScrollView>\n            <View style={styles.incident}>\n              <TextInput \n                style={styles.textInput}\n                placeholder=\"Título do caso\"\n                value={title}\n                onChangeText={text => setTitle( text )}\n              />\n              <TextInput\n                style={styles.textInput}\n                placeholder=\"Descrição\"\n                value={description}\n                onChangeText={text => setDescription( text )}\n              />\n              <TextInput\n                style={styles.textInput} \n                placeholder=\"Valor em R$\"\n                value={value}\n                onChangeText={text => setValue( text )}\n              />\n            </View>\n          </ScrollView>\n\n          <View style={styles.action}>\n            <TouchableOpacity style={styles.registerAction} onPress={handleRegisterIncident}>\n              <Text style={styles.actionText}>Cadastrar</Text>\n            </TouchableOpacity>\n          </View>\n        </View>\n\n      </TouchableWithoutFeedback>\n    </KeyboardAvoidingView>\n  )\n}"]},"metadata":{},"sourceType":"module"}